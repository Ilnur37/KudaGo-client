<div *ngIf="isUserDataLoaded" class="user-profile">

  <h1>Профиль</h1>
  <div style="text-align: right">
    <button mat-flat-button color="primary" (click)="openEditDialog()">Редактировать</button>
  </div>

  <div style="padding-top: 2rem" class="row">
    <div class="col">
      <img class="profile-image" [src]="previewImgURL || formatImage(avatar) || 'https://www.missingdogsuk.co.uk/wp-content/plugins/wp-job-manager-resumes/assets/images/candidate.png'" alt="user image">

      <input type="file"
             style="display: none"
             #fileInput
             (change)="onFileSelected($event)">

      <button mat-button (click)="fileInput.click()">Выбрать файл</button>
      <button mat-button *ngIf="selectedFile" (click)="onUpload()">Загрузить</button>
    </div>
    <div class="col" style="text-align: left">

      <h2>{{user.username}}</h2>

      <h3>{{user.firstname}} {{user.lastname}}</h3>
      <p>{{user.bio}}</p>
    </div>

    <mat-divider style="margin: 2rem 0"></mat-divider>

    <div style="display: flex; flex-wrap: wrap; text-align: left">
      <mat-card class="post-card" *ngFor="let post of favourite; let i = index">
        <img mat-card-image [src]="(post.mainImage)" alt="post image">
        <mat-card-content style="margin-top: -40px">
          <div mat-card-avatar class="example-header-image"></div>
          <mat-card-title style="margin-top: -5px" [routerLink]="[post.referenceInfo, post.id]">{{post.title}}</mat-card-title>
          <p>{{post.titleInfo}}</p>
        </mat-card-content>

        <mat-card-actions>
          <button mat-button (click)="likePost(post.id)" [ngClass]="post.usersLiked.indexOf(user.username) !== -1 ? 'is-liked' : 'not-liked'">
            <mat-icon class="icon-display">favorite</mat-icon>{{post.usersLiked.length}}</button>
        </mat-card-actions>

      </mat-card>
    </div>

    <router-outlet></router-outlet>

  </div>

</div>
